# 怎么保证消息不丢失
只要配置的好，就不会丢失。
1. 生产阶段:生产者向Broker发送消息时，需要做好try catch，如果有错误，需要重发。
2. 存储阶段: 需要等消息刷盘之后在给生产者响应。如果有多副本，还需等至少2台机器写入。
3. 消费阶段: 要完成业务logic之后，在给broker发送消费成功。
* 可靠性增强了，性能就下降了。需要做取舍。
# 怎么处理重复消息。
消费这要做到幂等。
# 怎么保证消息的有序性
1. 全局有序: 只能有一个生产者向Topic 发送消息。
2. 部分有序: 消息通过固定策略发送到固定队列，每个队列对应一个单线程的消费者
# 怎么处理消息的堆积
1. 查看是否有bug
2. 加队列数
3. 加消费者

# 面试题
https://zhuanlan.zhihu.com/p/140885460